{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sujungchoi/Desktop/\\uD83D\\uDC69\\u200D\\uD83D\\uDCBBCodingDojo/MERN/Full_Stack_MERN/authors/client/src/components/AuthorForm.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios'; // import { Link, navigate } from '@reach/router';\n// eslint-disable-next-line\n\nexport default _s(props => {\n  _s();\n\n  const {\n    initialName\n  } = props; //keep track of what is being typed via useState hook\n\n  const [authors, setAuthors] = useState([]);\n  const [name, setName] = useState(initialName);\n  const [errors, setErrors] = useState([]);\n\n  const createAuthor = author => {\n    axios.post('http://localhost:8001/api/authors/new', author).then(res => {\n      console.log(res, \"** New author created\"); //updating state after api call => re-render the page; show the new product created without having to refresh the page\n\n      setAuthors([...authors, res.data]);\n    }).catch(err => {\n      const errorResponse = err.response.data.errors; // Get the errors from err.response.data\n\n      const errorArr = [];\n\n      for (const key of Object.keys(errorResponse)) {\n        // Loop through all errors and get the messages\n        errorArr.push(errorResponse[key].message);\n      }\n\n      setErrors(errorArr);\n    }); //handler when the form is submitted\n\n    const onSubmitHandler = e => {\n      e.preventDefault(); //creating onSubmit method that takes in name as an object\n\n      createAuthor({\n        name\n      });\n      setName(\"\");\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [errors.map((err, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          \"color\": \"red\"\n        },\n        children: [\" \", err, \" \"]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 41\n      }, this)), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"formGroup\",\n        onSubmit: onSubmitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            HtmlFor: \"name\",\n            children: \"Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: e => setName(e.target.value),\n            value: name,\n            className: \"form-control\",\n            id: \"name\",\n            placeholder: \"ex) Hemmingway\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn btn-primary\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            class: \"btn btn-primary\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this);\n  };\n}, \"2MzPR1YZXa/VYMZSuZ0f/q/O1Dk=\");","map":{"version":3,"sources":["/Users/sujungchoi/Desktop/👩‍💻CodingDojo/MERN/Full_Stack_MERN/authors/client/src/components/AuthorForm.jsx"],"names":["React","useState","axios","props","initialName","authors","setAuthors","name","setName","errors","setErrors","createAuthor","author","post","then","res","console","log","data","catch","err","errorResponse","response","errorArr","key","Object","keys","push","message","onSubmitHandler","e","preventDefault","map","index","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios';\n// import { Link, navigate } from '@reach/router';\n\n// eslint-disable-next-line\nexport default (props) => {\n    const { initialName } = props;\n    //keep track of what is being typed via useState hook\n    const [ authors, setAuthors ] = useState([]);\n    const [name, setName] = useState(initialName);\n    const [errors, setErrors] = useState([]); \n\n\n    const createAuthor = author => {\n    axios.post('http://localhost:8001/api/authors/new', author)\n        .then(res=>{\n            console.log(res, \"** New author created\")\n            //updating state after api call => re-render the page; show the new product created without having to refresh the page\n            setAuthors([...authors, res.data]);\n        })\n        .catch(err=>{\n            const errorResponse = err.response.data.errors; // Get the errors from err.response.data\n            const errorArr = []; \n            for (const key of Object.keys(errorResponse)) { // Loop through all errors and get the messages\n                errorArr.push(errorResponse[key].message)\n            }\n            setErrors(errorArr);\n        })  \n\n    //handler when the form is submitted\n    const onSubmitHandler = e => {\n        e.preventDefault();\n        //creating onSubmit method that takes in name as an object\n        createAuthor({ name });\n        setName(\"\");\n    }\n\n    return (\n\n        <div>\n\n            {/* <h1>Favorite Authors</h1>\n\n            <h5><Link to='/'> Home </Link></h5>\n            <h4>Add a new author:</h4> */}\n\n            {errors.map((err, index) => <p style={{\"color\": \"red\"}} key={index}> {err} </p>)}\n            \n            <form className=\"formGroup\" onSubmit={onSubmitHandler}>\n                <div className=\"form-group\">\n                    <label HtmlFor=\"name\">Name:</label>\n                    <input type=\"text\" \n                    onChange={(e) => setName(e.target.value)} \n                    value={name} \n                    className=\"form-control\" id=\"name\" placeholder=\"ex) Hemmingway\" />\n                </div>\n                <div>\n                    <button class=\"btn btn-primary\">Cancel</button>\n                    <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n}"]},"metadata":{},"sourceType":"module"}