{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/sujungchoi/Desktop/\\uD83D\\uDC69\\u200D\\uD83D\\uDCBBCodingDojo/MERN/Full_Stack_MERN/authors/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,navigate}from'@reach/router';import axios from'axios';import AuthorForm from'../components/AuthorForm';// eslint-disable-next-line\nexport default(function(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),author=_useState2[0],setAuthor=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];useEffect(function(){axios.get(\"http://localhost:8001/api/authors/\".concat(props.id)).then(function(res){setAuthor(res.data);setLoaded(true);}).catch(function(err){console.log(err.response);navigate(\"/error\");});},[]);var updateAuthor=function updateAuthor(author){axios.put(\"http://localhost:8001/api/authors/edit/\".concat(props.id),author).then(function(res){console.log(res);// navigate to the main page after updating the form\nnavigate(\"/\");})// can I set two conditionals under .catch?? \n// does it have to be under .put or can it be .get of edit page?\n.catch(function(err){console.log(err.response);var errorResponse=err.response.data.errors;var errorArr=[];for(var _i=0,_Object$keys=Object.keys(errorResponse);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];errorArr.push(errorResponse[key].message);}setErrors(errorArr);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"updatePage\",children:[errors.map(function(err,index){return/*#__PURE__*/_jsxs(\"p\",{style:{\"color\":\"red\"},children:[\" \",err,\" \"]},index);}),/*#__PURE__*/_jsx(\"h1\",{children:\"Favorite Authors\"}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\" Home \"})}),/*#__PURE__*/_jsx(\"h4\",{style:{\"color\":\"rgb(107, 106, 106)\"},children:\"Edit this author:\"}),loaded&&/*#__PURE__*/_jsx(AuthorForm,{onSubmitProp:updateAuthor,initialName:author.name,initialGenre:author.genre,initialDesc:author.desc})]});});// https://mongoosejs.com/docs/api.html#model_Model.update\n// [options.runValidators=false] «Boolean» if true, runs update validators on this command. Update validators validate the update operation against the model's schema.","map":{"version":3,"sources":["/Users/sujungchoi/Desktop/👩‍💻CodingDojo/MERN/Full_Stack_MERN/authors/client/src/views/Update.jsx"],"names":["React","useState","useEffect","Link","navigate","axios","AuthorForm","props","author","setAuthor","loaded","setLoaded","errors","setErrors","get","id","then","res","data","catch","err","console","log","response","updateAuthor","put","errorResponse","errorArr","Object","keys","key","push","message","map","index","name","genre","desc"],"mappings":"qTAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,eAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CAEA;AACA,eAAe,SAACC,KAAD,CAAW,eAEMN,QAAQ,EAFd,wCAEfO,MAFe,eAEPC,SAFO,8BAGMR,QAAQ,CAAC,KAAD,CAHd,yCAGfS,MAHe,eAGPC,SAHO,8BAIMV,QAAQ,CAAC,EAAD,CAJd,yCAIfW,MAJe,eAIPC,SAJO,eAMtBX,SAAS,CAAC,UAAM,CACZG,KAAK,CAACS,GAAN,6CAA+CP,KAAK,CAACQ,EAArD,GACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACTR,SAAS,CAACQ,GAAG,CAACC,IAAL,CAAT,CACAP,SAAS,CAAC,IAAD,CAAT,CACH,CAJL,EAKKQ,KALL,CAKW,SAAAC,GAAG,CAAG,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB,EACAnB,QAAQ,CAAC,QAAD,CAAR,CACH,CARL,EASH,CAVQ,CAUN,EAVM,CAAT,CAYA,GAAMoB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAhB,MAAM,CAAI,CAC3BH,KAAK,CAACoB,GAAN,kDAAoDlB,KAAK,CAACQ,EAA1D,EAAgEP,MAAhE,EACKQ,IADL,CACU,SAAAC,GAAG,CAAI,CACTI,OAAO,CAACC,GAAR,CAAYL,GAAZ,EACA;AACAb,QAAQ,CAAC,GAAD,CAAR,CACH,CALL,CAMI;AACA;AAPJ,CAQKe,KARL,CAQW,SAAAC,GAAG,CAAE,CAAEC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB,EACV,GAAMG,CAAAA,aAAa,CAAGN,GAAG,CAACG,QAAJ,CAAaL,IAAb,CAAkBN,MAAxC,CACA,GAAMe,CAAAA,QAAQ,CAAG,EAAjB,CACA,0BAAkBC,MAAM,CAACC,IAAP,CAAYH,aAAZ,CAAlB,6BAA8C,CAAzC,GAAMI,CAAAA,GAAG,iBAAT,CACDH,QAAQ,CAACI,IAAT,CAAcL,aAAa,CAACI,GAAD,CAAb,CAAmBE,OAAjC,EACH,CACDnB,SAAS,CAACc,QAAD,CAAT,CACH,CAfL,EAgBH,CAjBD,CAmBF,mBACE,aAAK,SAAS,CAAC,YAAf,WAEHf,MAAM,CAACqB,GAAP,CAAW,SAACb,GAAD,CAAMc,KAAN,qBAAgB,WAAG,KAAK,CAAE,CAAC,QAAS,KAAV,CAAV,eAA0Cd,GAA1C,OAAiCc,KAAjC,CAAhB,EAAX,CAFG,cAGE,wCAHF,cAIE,iCAAI,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,oBAAJ,EAJF,cAKE,WAAI,KAAK,CAAE,CAAC,QAAS,oBAAV,CAAX,+BALF,CAOKxB,MAAM,eACP,KAAC,UAAD,EACI,YAAY,CAAEc,YADlB,CAEI,WAAW,CAAEhB,MAAM,CAAC2B,IAFxB,CAGI,YAAY,CAAE3B,MAAM,CAAC4B,KAHzB,CAII,WAAW,CAAE5B,MAAM,CAAC6B,IAJxB,EARJ,GADF,CAmBD,CAxDD,EA2DA;AACA","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { Link, navigate } from '@reach/router';\nimport axios from 'axios';\nimport AuthorForm from '../components/AuthorForm';\n\n// eslint-disable-next-line\nexport default (props) => {\n\n    const [author, setAuthor] = useState(); \n    const [loaded, setLoaded] = useState(false);\n    const [errors, setErrors] = useState([]); \n\n    useEffect(() => {\n        axios.get(`http://localhost:8001/api/authors/${props.id}` )\n            .then(res => {\n                setAuthor(res.data);\n                setLoaded(true);\n            })\n            .catch(err=> {\n                console.log(err.response)\n                navigate(\"/error\")\n            })\n    }, [])\n\n    const updateAuthor = author => {\n        axios.put(`http://localhost:8001/api/authors/edit/${props.id}`, author)\n            .then(res => {\n                console.log(res)\n                // navigate to the main page after updating the form\n                navigate(\"/\")\n            })\n            // can I set two conditionals under .catch?? \n            // does it have to be under .put or can it be .get of edit page?\n            .catch(err=>{ console.log(err.response)\n                const errorResponse = err.response.data.errors; \n                const errorArr = []; \n                for (const key of Object.keys(errorResponse)) { \n                    errorArr.push(errorResponse[key].message)\n                }\n                setErrors(errorArr);\n            });\n    }\n\n  return (\n    <div className=\"updatePage\">\n\n{errors.map((err, index) => <p style={{\"color\": \"red\"}} key={index}> {err} </p>)}\n      <h1>Favorite Authors</h1>\n      <h5><Link to='/'> Home </Link></h5>\n      <h4 style={{\"color\": \"rgb(107, 106, 106)\"}}>Edit this author:</h4>\n\n        {loaded && (\n        <AuthorForm \n            onSubmitProp={updateAuthor}\n            initialName={author.name}\n            initialGenre={author.genre}\n            initialDesc={author.desc}\n        />)}\n      \n\n    </div>\n  );\n}\n\n\n// https://mongoosejs.com/docs/api.html#model_Model.update\n// [options.runValidators=false] «Boolean» if true, runs update validators on this command. Update validators validate the update operation against the model's schema."]},"metadata":{},"sourceType":"module"}