{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/sujungchoi/Desktop/\\uD83D\\uDC69\\u200D\\uD83D\\uDCBBCodingDojo/MERN/Full_Stack_MERN/authors/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from'@reach/router';import axios from'axios';// eslint-disable-next-line\nexport default(function(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),authors=_useState2[0],setAuthors=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),names=_useState4[0],setNames=_useState4[1];useEffect(function(){axios.get(\"http://localhost:8001/api/authors\")// .then(res=>setProducts(res.data.products)) if res.json({products: allProducts}) instead of getting it as an array from controller\n.then(function(res){setAuthors(res.data);}).catch(function(err){return console.log(\"Error: \",err);});},[]);var deleteAuthor=function deleteAuthor(authorId){axios.delete('http://localhost:8001/api/authors/'+authorId).then(function(res){setAuthors(authors.filter(function(auth){return auth._id!==authorId;}));}).catch(function(err){return console.log(\"Error: \",err);});};////// CHECKBOX ///////\nvar updateAuthor=function updateAuthor(changedAuthor,id){setAuthors(authors.map(function(author){return author._id===id?changedAuthor:author;}));};var updateAPI=function updateAPI(data,id){axios.put(\"http://localhost:8001/api/authors/edit/\".concat(id),data).then(function(res){console.log(res.data);updateAuthor(res.data,id);}).catch(function(err){return console.log(err.response);});};var checkBoxHandler=function checkBoxHandler(completed,id){updateAPI({completed:completed},id);};////////////////////////////////////\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"mainPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Favorite Authors\"}),/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(Link,{to:\"/new\",children:\" Add an author! \"})}),/*#__PURE__*/_jsx(\"h5\",{children:\"We have quotes by:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"firstColumn\",scope:\"col\",children:\"Author\"}),/*#__PURE__*/_jsx(\"th\",{className:\"secondColumn\",scope:\"col\",children:\"Options available\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:authors.map(function(value,idx){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"authorName\",children:/*#__PURE__*/_jsx(Link,{to:\"/detail/\".concat(value._id),children:value.name})},idx),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-success\",children:/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(value._id),children:/*#__PURE__*/_jsx(\"span\",{style:{\"color\":\"green\"},children:\"Edit\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){deleteAuthor(value._id);},type:\"button\",className:\"btn btn-outline-warning\",children:\"Delete\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:value.completed,onChange:function onChange(e){return checkBoxHandler(e.target.checked,value._id);}})]})]},idx);})})]})]});});","map":{"version":3,"sources":["/Users/sujungchoi/Desktop/👩‍💻CodingDojo/MERN/Full_Stack_MERN/authors/client/src/views/Main.jsx"],"names":["React","useEffect","useState","Link","axios","authors","setAuthors","names","setNames","get","then","res","data","catch","err","console","log","deleteAuthor","authorId","delete","filter","auth","_id","updateAuthor","changedAuthor","id","map","author","updateAPI","put","response","checkBoxHandler","completed","value","idx","name","e","target","checked"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link } from '@reach/router'\nimport axios from 'axios';\n\n// eslint-disable-next-line\nexport default () => {\n    const [ authors, setAuthors ] = useState([]);\n    const [names, setNames] = useState([]);\n\n    useEffect(()=>{\n        axios.get(\"http://localhost:8001/api/authors\")\n            // .then(res=>setProducts(res.data.products)) if res.json({products: allProducts}) instead of getting it as an array from controller\n            .then(res=>{\n                setAuthors(res.data)\n            })  \n            .catch(err=>console.log(\"Error: \", err))     \n    }, [])\n\n    const deleteAuthor = (authorId) => {\n        axios.delete('http://localhost:8001/api/authors/' + authorId)\n            .then(res => {\n                setAuthors(authors.filter(auth => auth._id !== authorId));\n            })\n            .catch(err=>console.log(\"Error: \", err))     \n    }\n\n    ////// CHECKBOX ///////\n    const updateAuthor = (changedAuthor, id) => {\n        setAuthors(authors.map(author => ( author._id === id ? changedAuthor : author)\n        ));\n      }\n\n    const updateAPI = (data, id) => {\n        axios.put(`http://localhost:8001/api/authors/edit/${id}`, data)\n        .then(res => {\n            console.log(res.data)\n            updateAuthor(res.data, id);\n        })\n        .catch(err=>console.log(err.response));\n    }\n    \n    const checkBoxHandler = (completed, id) => {\n        updateAPI({completed: completed}, id);\n        }\n    ////////////////////////////////////\n\n    return (\n\n        <div className=\"mainPage\">\n            <h1>Favorite Authors</h1>\n\n            <h4><Link to='/new'> Add an author! </Link></h4>\n            <h5>We have quotes by:</h5>\n\n            <table className=\"table table-bordered\">\n                <thead>\n                    <tr>\n                    <th className=\"firstColumn\" scope=\"col\">Author</th>\n                    <th className=\"secondColumn\" scope=\"col\">Options available</th>\n                    </tr>\n                </thead>\n                <tbody>\n\n                    {authors.map((value, idx)=>{\n                    return <tr key={idx}>\n                            <td className=\"authorName\" key={idx}> \n                               <Link to={`/detail/${value._id}` }>{value.name}</Link>\n                            </td>\n                            <td>\n                                <button type=\"button\" className=\"btn btn-outline-success\">\n                                <Link to={`/edit/${value._id}`}>\n                                <span style={{\"color\": \"green\"}}>Edit</span>\n                                </Link> \n\n                                </button>\n                                \n                                <button onClick={(e)=>{deleteAuthor(value._id)}} \n                                type=\"button\" className=\"btn btn-outline-warning\">Delete</button>\n\n                                <input \n                                type=\"checkbox\" \n                                checked={value.completed}\n                                onChange={e=>checkBoxHandler(e.target.checked, value._id)}>\n\n                                </input>\n                            </td>\n                        </tr>\n                    })}\n\n                </tbody>\n            </table>\n\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}